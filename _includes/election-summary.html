<div class="election-summary">
  <section class="l-section election-summary__total">
    <div class="election-summary__total-header">Total contributions reported for this election</div>
    <div class="election-summary__total-amount">{{data_totals['total_contributions'] | dollars}}</div>
  </section>

  <section>
    <div id="searchbox"></div>
    <div id="hits"></div>

    <script>
      function initSearch() {
        const searchClient = algoliasearch('RGVUOXJ3SQ', 'ef71f156127ce537f9f596c58a647281');

        const search = instantsearch({
          indexName: 'election',
          searchClient,
        });

        search.addWidgets([
          instantsearch.widgets.searchBox({
            container: '#searchbox',
          }),

          instantsearch.widgets.hits({
            container: '#hits',
          })
        ]);

        search.start();
      }
      document.addEventListener("DOMContentLoaded", initSearch);
    </script>
  </section>

  <section class="l-section">
    <div class="l-section__content">
      <h2>Top 3 Most Expensive Races</h2>
    </div>
    <div class="l-section__content">
      {% for race in data_totals['most_expensive_races'] %}
        <div>
          <a href="/{{race['type']}}/{{ballot.locality}}/{{ballot.slug}}/{{race['slug']}}/">{{race['title']}}</a>
          <span class="election-summary__race-amount">{{race['amount'] | dollars}}</span>
        </div>
      {% endfor %}
    </div>
  </section>
</div>
