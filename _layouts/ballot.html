---
layout: default
---
{% assign ballot = page %}
{% assign locality = site.localities | where: 'slug', ballot.locality | first %}

{% assign ballots = site.ballots | where: "locality", locality.locality_id | reverse %}
{% assign current_ballot = ballots | where: "election", locality.current_election | first %}
{% assign today = site.time | date: "%Y-%m-%d" %}
{% assign current_election = locality.current_election | date: "%Y-%m-%d" %}

<article class="grid">
  {% include page-header.html title=title %}

  <div class="grid-col-12">
    <div>
      {% if current_election > today %}Upcoming{% else %}Recent{% endif %}
      election: <a href="{{ locality.url | prepend: site.baseurl }}">{{ locality.current_election | date: "%B %-d, %Y" }}</a>
    </div>
    {% include ballot.html ballot=ballot %}
    <h2>All elections:</h2>
    <div>
    <ul>
      {% for ballot in ballots %}
      <li><a href="{{ ballot.url | prepend: site.baseurl }}">{{ ballot.election | date: "%B %-d, %Y" }}</a></li>
      {% endfor %}
    </ul>
    </div>
  </div>
</article>
